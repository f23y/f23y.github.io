<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Browser Basics | f23y&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="PrefaceRecently, I’ve started to learn browser fuzzing and this is where I keep basic browser stuff. I will keep updating if I’ve learned something new. My goal here is to get familiar with browser pr">
<meta property="og:type" content="article">
<meta property="og:title" content="Browser Basics">
<meta property="og:url" content="https://f23y.github.io/2021/12/19/Browser%20Basics/index.html">
<meta property="og:site_name" content="f23y&#39;s blog">
<meta property="og:description" content="PrefaceRecently, I’ve started to learn browser fuzzing and this is where I keep basic browser stuff. I will keep updating if I’ve learned something new. My goal here is to get familiar with browser pr">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-12-18T19:33:20.000Z">
<meta property="article:modified_time" content="2021-12-21T19:54:35.817Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="basics">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="f23y's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">f23y&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://f23y.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Browser Basics" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/12/19/Browser%20Basics/" class="article-date">
  <time class="dt-published" datetime="2021-12-18T19:33:20.000Z" itemprop="datePublished">2021-12-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/chrome/">chrome</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Browser Basics
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h2><p>Recently, I’ve started to learn browser fuzzing and this is where I keep basic browser stuff. I will keep updating if I’ve learned something new. My goal here is to get familiar with browser programming model. Hopefully I can begin to learn how to fuzz browsers as soon as possible. By the way, I think it will be helpful to read the documentation and learn a little browser development knowledge for a better understanding of the talks. Perhaps I should open a repo for this, I will do it after Christmas. :)</p>
<span id="more"></span>

<h2 id="Chrome-University-Notes"><a href="#Chrome-University-Notes" class="headerlink" title="Chrome University Notes"></a>Chrome University Notes</h2><p>To have an overall understanding of the browser, I’ve decided to take a look at of <a target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PLNYkxOF6rcICgS7eFJrGDhMBwWtdTgzpx">Chrome University</a> </p>
<h3 id="The-history-of-the-web"><a href="#The-history-of-the-web" class="headerlink" title="The history of the web"></a>The history of the web</h3><p>This video is mainly about the speaker’s work experience. It’s better to watch the video because the speaker’s humor makes the chapter more accessible.</p>
<p><strong>Mosaic–&gt;IE–&gt;Chrome</strong></p>
<p><strong>Chromium</strong>: Fast, seamless, safe, and reliable computing experiences accessible for all. </p>
<h3 id="Anatomy-of-the-browser-101"><a href="#Anatomy-of-the-browser-101" class="headerlink" title="Anatomy of the browser 101"></a>Anatomy of the browser 101</h3><p><strong>Core principles</strong>: speed, security, simplicity and stability.</p>
<h4 id="Chrome-at-Launch"><a href="#Chrome-at-Launch" class="headerlink" title="Chrome at Launch"></a>Chrome at Launch</h4><h5 id="Chrome1-0-multi-process-architecture"><a href="#Chrome1-0-multi-process-architecture" class="headerlink" title="Chrome1.0(multi-process architecture)"></a>Chrome1.0(multi-process architecture)</h5><p>​        <strong>Browser</strong>: UI, networking, storage.</p>
<p>​        <strong>Plugin</strong>: NPAPI(Netscape Plugin Application Programming Interface).</p>
<p>​        <strong>Renderer</strong>(sandboxed): Webkit.</p>
<p>​        (They talked to each other through IPC.)</p>
<p><strong>IPC</strong>: inter-process communication, message passing/shared memory, between processes of different privileges.</p>
<p><strong>Sandboxing</strong>(platform-specific, multi-level): untrusted data–&gt;locked-down process.</p>
<p><strong>Plugin Process</strong>: work with existing plugins, ran Flash/Java/reader, unsandboxed.</p>
<p><strong>Browser Process</strong>: central coordinator, owns browser state(profile data, settings), draws UI, handles networking, can’t trust renderer.</p>
<p><strong>Threads</strong>: child processes: a main thread, an IPC thread</p>
<p>​                  browser processes: browser threads(UI, IO, files)</p>
<h4 id="Present-Chrome"><a href="#Present-Chrome" class="headerlink" title="Present Chrome"></a>Present Chrome</h4><h5 id="Chrome-Today"><a href="#Chrome-Today" class="headerlink" title="Chrome Today"></a>Chrome Today</h5><p>​        <strong>GPU</strong>(partial sandboxed): compositing, scrolling</p>
<p>​        <strong>Browser</strong>: UI, networking, storage</p>
<p>​        <strong>Utility</strong>(sandboxed)</p>
<p>​        <strong>Renderer</strong>(sandboxed): Blink</p>
<p>​        <strong>Plugin</strong>(sandboxed)</p>
<p>​        <strong>Extension</strong>(sandboxed)          </p>
<p><strong>GPU Process</strong>: expensive GPU readback, large project, separate process.</p>
<p><strong>Utility Process</strong>: more features–&gt;new class of untrusted data(installing an extension, processing JSON), short-lived.</p>
<p><strong>Extension Process</strong>: work well with the core principles.</p>
<p><strong>Pepper Plugins</strong>: exploits through plugin code(Flash&amp;PDF), difficult to create sandboxed plugin API, ported Flash, PDFium.</p>
<p><strong>Chrome/content split</strong>: separate Chrome from the platform, src/chrome–&gt;<strong>src/chrome</strong>(UI, browser features)&amp;<strong>src/content</strong>(multi-process sandboxed platform)–&gt;new products(on the top of content).</p>
<p><strong>Componentization</strong>: IOS(Safari’s web engine), share code with platform that doesn’t use Blink, split feature code from src/chrome to <strong>src/components</strong>.</p>
<p><strong>Site Isolation</strong>: run parts of a tab in different processes.</p>
<p><strong>Mojo</strong>: new IPC mechanism, IDL based, generation of bindings, hides details of which process the caller and callee run in.</p>
<p><strong>Mojo Primitives</strong>: message pipes, shared buffers, data pipes, process/thread agnostic.</p>
<h4 id="Future-Chrome"><a href="#Future-Chrome" class="headerlink" title="Future Chrome"></a>Future Chrome</h4><h5 id="Servicification"><a href="#Servicification" class="headerlink" title="Servicification"></a>Servicification</h5><p>upgrade(improve Chrome’s principles)</p>
<p>microservice architecture(well-defined, reusable, decoupled, layered system)</p>
<p>Servicification Benefits: core principles</p>
<p>Servicification Process Model: All the processes are sandboxed except Browser.(partial sandboxed: Devices and GPU)</p>
<h3 id="Anatomy-of-the-browser-201"><a href="#Anatomy-of-the-browser-201" class="headerlink" title="Anatomy of the browser 201"></a>Anatomy of the browser 201</h3><p>The Browser Process</p>
<p>//chrome–&gt;//content</p>
<p>a browser process: Utility rprocesses, GPU processes, Renderers… </p>
<p>major objects: BrowserProcess, content::BrowserMainLoop, content::BrowserMainParts, ChromeBrowserMainParts</p>
<p>OffTheRecordProfile–&gt;Profile–&gt;content::BrowserContext–&gt;base::SupportsUserData::Data &amp; KeyedService&lt;–BrowserContextKeyedServiceFactory</p>
<p>WebContentsObserver–&gt;WebContents–&gt;(owns)WebContentsUserData</p>
<p>WebContents–&gt;(calls)WebContentsDelegate&lt;–(implements)Browser</p>
<p>RenderFrameHost(Browser, Content)–&gt;RenderFrame(Renderer, Content)–&gt;WebLocalFrame(Blink)–&gt;LocalFrame(Blink)</p>
<p>multiple renderer processes</p>
<p>Profile: History, Bookmarks, Passwords</p>
<p>​              Default Storage Partition: Cookies, Local Storage, IndexedDB</p>
<p>​              Other Storage Partitions: Cookies, Local Storage, IndexedDB</p>
<h3 id="Life-of-a-navigation"><a href="#Life-of-a-navigation" class="headerlink" title="Life of a navigation"></a>Life of a navigation</h3><p>Navigation is one of the main functions of a browser. It is the process through which the user loads documents.</p>
<p>Documentation and slides!</p>
<p><a target="_blank" rel="noopener" href="https://source.chromium.org/chromium/chromium/src/+/master:docs/navigation.md">Documentation</a>    <a target="_blank" rel="noopener" href="https://www.chromium.org/developers/design-documents/site-isolation">Site isolation design document</a></p>
<p>Just read the slides! ;)</p>
<h3 id="Life-of-a-pixel"><a href="#Life-of-a-pixel" class="headerlink" title="Life of a pixel"></a>Life of a pixel</h3><p><a target="_blank" rel="noopener" href="https://docs.google.com/presentation/d/1boPxbgNrTU0ddsc144rcXayGA_WF53k96imRH8Mp34Y/edit#slide=id.ga884fe665f_64_6">slides</a></p>
<p>to be continued…</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://f23y.github.io/2021/12/19/Browser%20Basics/" data-id="ckxc7sn2y00008wu009m880g2" data-title="Browser Basics" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/basics/" rel="tag">basics</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/12/19/Windows%E6%8F%90%E6%9D%83%E6%BC%8F%E6%B4%9E%EF%BC%9ACVE-2021-36934(HiveNightmare)%E5%A4%8D%E7%8E%B0%E4%B8%8E%E5%88%86%E6%9E%90/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Windows提权漏洞：CVE-2021-36934(HiveNightmare)复现与分析
        
      </div>
    </a>
  
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CVEs/">CVEs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/chrome/">chrome</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/concepts/">concepts</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/HiveNightmare/" rel="tag">HiveNightmare</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SAM/" rel="tag">SAM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/" rel="tag">Windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/basics/" rel="tag">basics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/taint-analyzer/" rel="tag">taint analyzer</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/HiveNightmare/" style="font-size: 10px;">HiveNightmare</a> <a href="/tags/SAM/" style="font-size: 10px;">SAM</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/basics/" style="font-size: 10px;">basics</a> <a href="/tags/taint-analyzer/" style="font-size: 10px;">taint analyzer</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/01/18/%E5%B0%8F%E7%99%BD%E5%AD%A6%E6%B1%A1%E7%82%B9%E5%88%86%E6%9E%90/">page</a>
          </li>
        
          <li>
            <a href="/2021/12/19/Windows%E6%8F%90%E6%9D%83%E6%BC%8F%E6%B4%9E%EF%BC%9ACVE-2021-36934(HiveNightmare)%E5%A4%8D%E7%8E%B0%E4%B8%8E%E5%88%86%E6%9E%90/">Windows提权漏洞：CVE-2021-36934(HiveNightmare)复现与分析</a>
          </li>
        
          <li>
            <a href="/2021/12/19/Browser%20Basics/">Browser Basics</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>